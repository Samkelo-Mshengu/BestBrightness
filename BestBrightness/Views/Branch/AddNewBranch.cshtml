
@model BestBrightness.Controllers.BranchController


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Add Branch</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9aU8f5qZgZlHfEauXhQrpf8rW+UZu0ekR1VQ/wl5jmzN9AzYZg6Me0/v5z4yBpXy" crossorigin="anonymous">
</head>
<body>
    <div class="container">
        @*method="post" id="addBranchForm" asp-page="AddBranch" asp-route-actions="addBranch"*@
        <h1 class="mt-5 mb-4">Add Branch</h1>
        <form method="post" id="addBranchForm" asp-page="AddBranch" asp-route-actions="addBranch">
            <div class="mb-3">
                @Html.LabelFor(model => model.AddBranchView.branch.BranchName, htmlAttributes: new { @class = "font-weight-bold" })
                @Html.TextBoxFor(model => model.AddBranchView.branch.BranchName, new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.AddBranchView.branch.BranchName, "", new { @class = "text-danger" })
            </div>
            <div class="mb-3">
                @Html.LabelFor(model => model.AddBranchView.branch.BranchLocation, htmlAttributes: new { @class = "font-weight-bold" })
                @Html.TextBoxFor(model => model.AddBranchView.branch.BranchLocation, new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.AddBranchView.branch.BranchLocation, "", new { @class = "text-danger" })
            </div>



            <div class="form-group col-md-3 mb-1">
                @Html.LabelFor(model => model.SelectedCountry, "Country: ", new { @class = "font-weight-bold" })
                @Html.DropDownListFor(model => model.SelectedCountry, Model.GetAllCountries.Select(d => new SelectListItem()
           {
               Value = d.CountyID.ToString(),
               Text = d.CountyName

           }), "Please Select Country", new { @class = "form-control", id = "countryDropdown" })
                @Html.ValidationMessageFor(model => model.SelectedCountry, "", new { @class = "text-danger" })
            </div>

            <div class="form-group col-md-3 mb-1" id="provinceDIV">
                @Html.LabelFor(model => model.SelectedProvince, "Province : ", new { @class = "font-weight-bold" })
                <select class="form-control" id="ProvinceDropDown" name="ProvinceDropDown"></select>

            </div>

        </form>
        <button type="submit" class="btn btn-primary">Add Branch <i class="fa fa-edit"></i></button>
       <script $(document).ready(function () {
                $('#countrydropdown').change(function () {
                var selectedcountry=$(this).val();
                $.ajax({
                url: 'Branch/AddNewBranch' ,
                type: 'post' ,
                data: { selectedcountry: selectedcountry },
                success:
                function (response) {
                console.log(response.data);
                var provinces=response.data;
                var $ProvinceDropDown=$('#provincedropdown');
                $provincedropdown.empty();
                $provincedropdown.append($('<option>', {
                                    value: '',
                                    text: 'please select province'
                                }));
                                $.each(provinces, function (i, province) {
                                    $provincedropdown.append($('<option>', {
                                        value: province.value,
                                        text: province.text
                                    }));
                                });
                            },
                            error: function ( response) {
                               alert("error:" +response )
                            }
                        });
                    });
                });
            </script>
    </div>


</body>
</html>
